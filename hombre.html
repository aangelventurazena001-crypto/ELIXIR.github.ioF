<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√©lixir Parfum - Perfumes para Hombre</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="portada.css">
    <style>
        .skeleton-card {
            background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 15px;
            height: 400px;
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .loading-text {
            text-align: center;
            color: #EFBF04;
            font-size: 1.2rem;
            margin: 2rem 0;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-btn {
            padding: 0.7rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(239, 191, 4, 0.3);
            border-radius: 50px;
            color: #EFBF04;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .dropdown-btn:hover {
            background: rgba(239, 191, 4, 0.2);
            border-color: #EFBF04;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(239, 191, 4, 0.3);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(239, 191, 4, 0.3);
            border-radius: 15px;
            margin-top: 0.5rem;
            min-width: 180px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.7);
            z-index: 1000;
            overflow: hidden;
            padding: 0.5rem 0;
        }

        .dropdown-content a {
            display: block;
            padding: 0.8rem 1.5rem;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .dropdown-content a:hover {
            background: rgba(239, 191, 4, 0.15);
            color: #EFBF04;
            padding-left: 2rem;
        }

        .dropdown-content a i {
            margin-right: 0.5rem;
            width: 20px;
        }
    </style>
</head>
<body>

<div class="contact-sidebar">
    <a href="https://wa.link/vazab7" target="_blank" class="contact-item contact-whatsapp">
        <div class="icon-wrapper">
            <i class="fa-brands fa-whatsapp"></i>
            <span class="ping"></span>
        </div>
        <div class="contact-text">
            <strong>WhatsApp</strong>
            <span>Chatea ahora</span>
            <span class="phone">+51 924 859 152</span>
        </div>
    </a>

    <a href="https://www.facebook.com/profile.php?id=61572488352776" target="_blank" class="contact-item contact-facebook">
        <div class="icon-wrapper">
            <i class="fa-brands fa-facebook-f"></i>
            <span class="ping"></span>
        </div>
        <div class="contact-text">
            <strong>Facebook</strong>
            <span>S√≠guenos</span>
        </div>
    </a>

    <a href="https://www.instagram.com/elixirparfum.cl?igsh=c25hZzU2dWU1NTUy" target="_blank" class="contact-item contact-instagram">
        <div class="icon-wrapper">
            <i class="fa-brands fa-instagram"></i>
            <span class="ping"></span>
        </div>
        <div class="contact-text">
            <strong>Instagram</strong>
            <span>@elixirparfum</span>
        </div>
    </a>

    <a href="mailto:contacto@elixirparfum.com" class="contact-item contact-email">
        <div class="icon-wrapper">
            <i class="fa-solid fa-envelope"></i>
            <span class="ping"></span>
        </div>
        <div class="contact-text">
            <strong>Email</strong>
            <span>Escr√≠benos</span>
        </div>
    </a>
</div>

<div class="floating-notification" id="floatingNotif">
    <button class="close-notif" onclick="closeNotif()">
        <i class="fa-solid fa-xmark"></i>
    </button>
    <div class="notif-icon">
        <i class="fa-solid fa-gift"></i>
    </div>
    <div class="notif-content">
        <strong>¬°Oferta Especial!</strong>
        <p>Usa el c√≥digo <span class="code">ELIXIR10</span> y obt√©n S/. 50 de descuento</p>
    </div>
</div>

<div class="particles" id="particles"></div>

<header class="header" id="header">
    <div class="header-left" onclick="window.location.href='index.html'">
        <h1>√©lixir Parfum</h1>
        <p>Aromas y Elegancia</p>
    </div>
    
    <div class="header-right">
        <nav class="nav-links">
            <a href="index.html"><i class="fa-solid fa-house"></i> Home</a>
            
            <div class="dropdown">
                <button class="dropdown-btn" onclick="toggleDropdown(event)">
                    <i class="fa-solid fa-spray-can"></i> Aromas 
                    <i class="fa-solid fa-chevron-down" style="font-size: 0.7rem; margin-left: 0.3rem;"></i>
                </button>
                <div id="dropdownMenu" class="dropdown-content">
                    <a href="hombre.html">
                        <i class="fa-solid fa-mars"></i> Hombres
                    </a>
                    <a href="mujeres.html">
                        <i class="fa-solid fa-venus"></i> Mujeres
                    </a>
                    <a href="unisex.html">
                        <i class="fa-solid fa-star"></i> Unisex
                    </a>
                </div>
            </div>
        </nav>

        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="Buscar perfumes...">
            <i class="fa-solid fa-search search-icon"></i>
            <div id="searchResults" class="search-results"></div>
        </div>
        
        <a href="carrito.html" class="cart-btn">
            <i class="fa-solid fa-cart-shopping"></i>
            <span id="carritoContador" style="position: absolute; top: -8px; right: -8px; background: #EFBF04; color: #000; border-radius: 50%; width: 22px; height: 22px; display: none; justify-content: center; align-items: center; font-size: 0.75rem; font-weight: 700;">0</span>
        </a>

        <div id="userSection">
            <button class="login-btn" id="openLogin">
                <i class="fa-solid fa-user"></i> Login
            </button>
        </div>
    </div>
</header>

<section class="hero-video">
    <video autoplay muted loop playsinline>
        <source src="videos/motion2Fast_Video_esenciara_perfume_P_0 (1).mp4" type="video/mp4">
    </video>
    <div class="hero-overlay">
        <h2>Perfumes para Hombre</h2>
        <p>Descubre fragancias masculinas que realzan tu estilo y personalidad</p>
    </div>
</section>

<section class="productos" style="margin-top: 120px; padding-top: 2rem;">
    <div class="section-title">
        <h2>Perfumes para Hombre</h2>
        <p>Fragancias masculinas exclusivas y elegantes</p>
    </div>

    <div id="loadingContainer" class="productos-grid" style="display: none;">
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
    </div>

    <div class="loading-text" id="loadingText">
        <i class="fa-solid fa-spinner fa-spin"></i> Cargando perfumes para hombre...
    </div>

    <div class="productos-grid" id="productosGrid"></div>

    <div id="errorMessage" style="display: none; text-align: center; padding: 3rem; color: rgba(255,255,255,0.6);">
        <i class="fa-solid fa-exclamation-triangle" style="font-size: 3rem; color: #EFBF04; margin-bottom: 1rem;"></i>
        <p style="font-size: 1.2rem;">No se pudieron cargar los productos</p>
        <p>Aseg√∫rate de que el servidor est√© corriendo</p>
        <button onclick="location.reload()" style="margin-top: 1rem; padding: 1rem 2rem; background: #EFBF04; color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 700;">
            <i class="fa-solid fa-rotate-right"></i> Reintentar
        </button>
    </div>
</section>

<footer class="footer">
    <div class="footer-content">
        <div class="footer-section">
            <h3>√©lixir Parfum</h3>
            <p>Tu destino premium para las fragancias m√°s exclusivas y elegantes del mundo.</p>
            <div class="social-links">
                <a href="https://www.facebook.com/profile.php?id=61572488352776"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/elixirparfum.cl?igsh=c25hZzU2dWU1NTUy"><i class="fab fa-instagram"></i></a>
                <a href="https://x.com/?lang=es"><i class="fab fa-twitter"></i></a>
                <a href="https://wa.link/vazab7"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>

        <div class="footer-section">
            <h3>Enlaces R√°pidos</h3>
            <ul class="footer-links">
                <li><a href="index.html"><i class="fa-solid fa-chevron-right"></i> Home</a></li>
                <li><a href="hombre.html"><i class="fa-solid fa-chevron-right"></i> Perfumes Hombres</a></li>
                <li><a href="mujeres.html"><i class="fa-solid fa-chevron-right"></i> Perfumes Mujeres</a></li>
                <li><a href="unisex.html"><i class="fa-solid fa-chevron-right"></i> Perfumes Unisex</a></li>
            </ul>
        </div>


        <div class="footer-section">
            <h3>Informaci√≥n</h3>
            <ul class="footer-links">
                <li><a href="#"><i class="fa-solid fa-chevron-right"></i> Sobre Nosotros</a></li>
                <li><a href="#"><i class="fa-solid fa-chevron-right"></i> T√©rminos y Condiciones</a></li>
                <li><a href="#"><i class="fa-solid fa-chevron-right"></i> Pol√≠tica de Privacidad</a></li>
                <li><a href="#"><i class="fa-solid fa-chevron-right"></i> Env√≠os y Devoluciones</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h3>Contacto</h3>
            <p><i class="fa-solid fa-location-dot"></i> Lambayeque, Per√∫</p>
            <p><i class="fa-solid fa-phone"></i> +51 924 859 152</p>
            <p><i class="fa-solid fa-envelope"></i> contacto@elixirparfum.com</p>
            <p><i class="fa-solid fa-clock"></i> Lun - Sab: 9:00 AM - 8:00 PM</p>
        </div>
    </div>

    <div class="footer-bottom">
        <p>&copy; 2025 √©lixir Parfum. Todos los derechos reservados.</p>
    </div>
</footer>

<button class="btn-scroll-top" id="scrollTopBtn" onclick="scrollToTop()">
    <div class="scroll-progress"></div>
    <i class="fa-solid fa-arrow-up"></i>
    <span class="tooltip-scroll">Volver arriba</span>
</button>

<div class="modal" id="modalLogin" style="display: none; position: fixed; z-index: 100000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); justify-content: center; align-items: center; overflow-y: auto;">
    <div class="modal-content" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); padding: 2.5rem; border-radius: 20px; box-shadow: 0 20px 60px rgba(239, 191, 4, 0.4); border: 2px solid rgba(239, 191, 4, 0.3); position: relative; width: 90%; max-width: 450px; max-height: 90vh; overflow-y: auto;">
        <span class="close" style="position: absolute; top: 1rem; right: 1.5rem; font-size: 2rem; color: #EFBF04; cursor: pointer;">&times;</span>
        
        <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid rgba(255,255,255,0.1);">
            <button id="tabLogin" style="flex: 1; padding: 1rem; background: none; border: none; color: #EFBF04; font-size: 1rem; font-weight: 600; cursor: pointer; border-bottom: 3px solid #EFBF04;">
                <i class="fa-solid fa-right-to-bracket"></i> Iniciar Sesi√≥n
            </button>
            <button id="tabRegistro" style="flex: 1; padding: 1rem; background: none; border: none; color: rgba(255, 255, 255, 0.6); font-size: 1rem; font-weight: 600; cursor: pointer; border-bottom: 3px solid transparent;">
                <i class="fa-solid fa-user-plus"></i> Registrarse
            </button>
        </div>

        <div id="formLogin">
            <h2 style="margin-bottom: 1.5rem; color: #EFBF04;"><i class="fa-solid fa-user"></i> Iniciar Sesi√≥n</h2>
            <form id="loginForm">
                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-envelope"></i> Correo:</label>
                <input type="email" id="loginEmail" placeholder="tu@correo.com" required style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-key"></i> Contrase√±a:</label>
                <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required style="width: 100%; padding: 0.8rem; margin-bottom: 1.5rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <button type="submit" style="width: 100%; padding: 1rem; background: linear-gradient(135deg, #EFBF04 0%, #d4a003 100%); color: #000; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 700; cursor: pointer;">
                    <i class="fa-solid fa-door-open"></i> Entrar
                </button>
            </form>
        </div>

        <div id="formRegistro" style="display: none;">
            <h2 style="margin-bottom: 1.5rem; color: #EFBF04;"><i class="fa-solid fa-user-plus"></i> Crear Cuenta</h2>
            <form id="registroForm">
                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-user"></i> Nombres:</label>
                <input type="text" id="regNombres" placeholder="Juan" required style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-user"></i> Apellidos:</label>
                <input type="text" id="regApellidos" placeholder="P√©rez" required style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-envelope"></i> Correo:</label>
                <input type="email" id="regEmail" placeholder="tu@correo.com" required style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-phone"></i> Tel√©fono:</label>
                <input type="tel" id="regTelefono" placeholder="924859152" required style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <label style="display: block; margin-bottom: 0.5rem; color: #fff;"><i class="fa-solid fa-key"></i> Contrase√±a:</label>
                <input type="password" id="regPassword" placeholder="M√≠nimo 6 caracteres" required minlength="6" style="width: 100%; padding: 0.8rem; margin-bottom: 1.5rem; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(239, 191, 4, 0.3); border-radius: 8px; color: white; box-sizing: border-box;">

                <button type="submit" style="width: 100%; padding: 1rem; background: linear-gradient(135deg, #EFBF04 0%, #d4a003 100%); color: #000; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 700; cursor: pointer;">
                    <i class="fa-solid fa-user-plus"></i> Registrarse
                </button>
            </form>
        </div>
    </div>
</div>

<script src="api.js"></script>
<script src="navigation.js"></script>

<script>
// üî• CORRECCI√ìN: CARGAR SOLO PERFUMES MUJER
async function cargarProductosDesdeBD() {
    const loadingText = document.getElementById('loadingText');
    const productosGrid = document.getElementById('productosGrid');
    const errorMessage = document.getElementById('errorMessage');
    const loadingContainer = document.getElementById('loadingContainer');

    try {
        loadingContainer.style.display = 'grid';
        loadingText.style.display = 'block';

        // ‚úÖ SOLUCI√ìN: Pasar par√°metro genero=MUJER al servidor
        const response = await fetch('http://localhost:3000/api/perfumes?genero=HOMBRE');
        const perfumes = await response.json();
        
        console.log('‚úÖ Perfumes HOMBRE cargados:', perfumes.length);
        
        if (!perfumes || perfumes.length === 0) {
            productosGrid.innerHTML = `
                <div style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                    <i class="fa-solid fa-box-open" style="font-size: 3rem; color: #EFBF04; margin-bottom: 1rem;"></i>
                    <p style="color: rgba(255,255,255,0.8); font-size: 1.2rem;">No hay perfumes para hombre disponibles</p>
                </div>
            `;
            loadingText.style.display = 'none';
            loadingContainer.style.display = 'none';
            return;
        }

        const cardsHTML = perfumes.map(perfume => {
            const precioMinimo = perfume.tamanos && perfume.tamanos.length > 0 
                ? Math.min(...perfume.tamanos.map(t => t.Precio_Venta))
                : 0;

            return `
                <div class="card" onclick="window.location.href='hola3.html?id=${perfume.Codigo_Producto}&from=hombres'">
                    <div class="img-container">
                        <img src="${perfume.Imagen_Principal || 'img/placeholder.jpg'}" alt="${perfume.Nombre}" loading="lazy">
                    </div>
                    <h3>${perfume.Nombre}</h3>
                    <p class="marca" style="color: rgba(255,255,255,0.7); font-size: 0.9rem; margin: 0.5rem 0;">${perfume.Marca}</p>
                    <p style="color: rgba(255,255,255,0.8); font-size: 0.95rem;">${perfume.Descripcion_Corta || 'Fragancia exclusiva'}</p>
                    ${precioMinimo > 0 ? `<p style="color: #EFBF04; font-weight: 700; font-size: 1.3rem; margin-top: 1rem;">Desde S/. ${precioMinimo.toFixed(2)}</p>` : ''}
                </div>
            `;
        }).join('');

        productosGrid.innerHTML = cardsHTML;
        loadingText.style.display = 'none';
        loadingContainer.style.display = 'none';

    } catch (error) {
        console.error('‚ùå Error:', error);
        loadingText.style.display = 'none';
        loadingContainer.style.display = 'none';
        errorMessage.style.display = 'block';
        productosGrid.innerHTML = '';
    }
}

// PART√çCULAS
function crearParticulas() {
    const particlesContainer = document.getElementById('particles');
    for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        const size = Math.random() * 100 + 50;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.animationDuration = (Math.random() * 10 + 15) + 's';
        particlesContainer.appendChild(particle);
    }
}

// SCROLL
window.addEventListener('scroll', () => {
    const header = document.getElementById('header');
    const scrollBtn = document.getElementById('scrollTopBtn');
    
    if (window.scrollY > 50) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }

    if (scrollBtn && window.scrollY > 300) {
        scrollBtn.classList.add('visible');
    } else if (scrollBtn) {
        scrollBtn.classList.remove('visible');
    }
});

function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function closeNotif() {
    const notif = document.getElementById('floatingNotif');
    if (notif) {
        notif.style.animation = 'slideOutRight 0.5s ease';
        setTimeout(() => notif.style.display = 'none', 500);
    }
}

setTimeout(closeNotif, 10000);

// DROPDOWN
function toggleDropdown(event) {
    event.stopPropagation();
    const dropdown = document.getElementById('dropdownMenu');
    dropdown.style.display = dropdown.style.display === 'none' || dropdown.style.display === '' ? 'block' : 'none';
}

window.addEventListener('click', (e) => {
    const dropdown = document.getElementById('dropdownMenu');
    if (dropdown && !e.target.closest('.dropdown')) {
        dropdown.style.display = 'none';
    }
});

// MODAL
const modal = document.getElementById('modalLogin');
const openBtn = document.getElementById('openLogin');
const closeBtn = document.querySelector('.close');
const tabLogin = document.getElementById('tabLogin');
const tabRegistro = document.getElementById('tabRegistro');

if (openBtn) openBtn.onclick = () => modal.style.display = 'flex';
if (closeBtn) closeBtn.onclick = () => modal.style.display = 'none';
window.onclick = (e) => { if (e.target === modal) modal.style.display = 'none'; };

if (tabLogin && tabRegistro) {
    tabLogin.onclick = () => {
        tabLogin.style.color = '#EFBF04';
        tabLogin.style.borderBottom = '3px solid #EFBF04';
        tabRegistro.style.color = 'rgba(255, 255, 255, 0.6)';
        tabRegistro.style.borderBottom = '3px solid transparent';
        document.getElementById('formLogin').style.display = 'block';
        document.getElementById('formRegistro').style.display = 'none';
    };
    tabRegistro.onclick = () => {
        tabRegistro.style.color = '#EFBF04';
        tabRegistro.style.borderBottom = '3px solid #EFBF04';
        tabLogin.style.color = 'rgba(255, 255, 255, 0.6)';
        tabLogin.style.borderBottom = '3px solid transparent';
        document.getElementById('formRegistro').style.display = 'block';
        document.getElementById('formLogin').style.display = 'none';
    };
}

// LOGIN
async function iniciarSesion(correo, password) {
    if (typeof login === 'undefined') {
        return { success: false, error: 'Sistema no disponible' };
    }
    return await login(correo, password);
}

document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const resultado = await iniciarSesion(
        document.getElementById('loginEmail').value,
        document.getElementById('loginPassword').value
    );
    
    if (resultado.success) {
        alert('¬°Bienvenido! ' + resultado.cliente.Nombres);
        modal.style.display = 'none';
        actualizarHeaderUsuario();
        actualizarContador();
    } else {
        alert('Error: ' + resultado.error);
    }
});

// REGISTRO
async function registrarCliente(nombres, apellidos, correo, telefono, password) {
    try {
        const response = await fetch('/api/...', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ nombres, apellidos, correo, telefono, password })
        });
        
        const data = await response.json();
        return data.success ? { success: true } : { success: false, error: data.error };
    } catch (error) {
        return { success: false, error: 'Error de conexi√≥n' };
    }
}

document.getElementById('registroForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const resultado = await registrarCliente(
        document.getElementById('regNombres').value,
        document.getElementById('regApellidos').value,
        document.getElementById('regEmail').value,
        document.getElementById('regTelefono').value,
        document.getElementById('regPassword').value
    );
    
    if (resultado.success) {
        alert('¬°Registro exitoso! Ahora puedes iniciar sesi√≥n');
        tabLogin.click();
        document.getElementById('loginEmail').value = document.getElementById('regEmail').value;
    } else {
        alert('Error: ' + resultado.error);
    }
});

// ACTUALIZAR HEADER
function actualizarHeaderUsuario() {
    if (typeof obtenerClienteActual !== 'function') {
        setTimeout(actualizarHeaderUsuario, 100);
        return;
    }
    
    const cliente = obtenerClienteActual();
    const userSection = document.getElementById('userSection');
    
    if (cliente && userSection) {
        userSection.innerHTML = `
            <div style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="color: #EFBF04; font-weight: 600; font-size: 0.9rem;">
                    <i class="fa-solid fa-user"></i> Hola, ${cliente.Nombres}
                </span>
                <button onclick="cerrarSesion()" class="login-btn" style="background: rgba(239, 191, 4, 0.2); padding: 0.5rem 1rem;">
                    <i class="fa-solid fa-right-from-bracket"></i> Salir
                </button>
            </div>
        `;
    }
}

function actualizarContador() {
    setTimeout(() => {
        if (typeof actualizarContadorCarrito === 'function') {
            actualizarContadorCarrito();
        }
    }, 300);
}

// INICIALIZAR
window.addEventListener('load', () => {
    console.log('üöÄ Cargando mujeres.html...');
    crearParticulas();
    cargarProductosDesdeBD();
    actualizarHeaderUsuario();
    actualizarContador();
});
</script>

</body>
</html>


